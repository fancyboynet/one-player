/*! one-player v1.0.0 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OnePlayer=t():e.OnePlayer=t()}(window,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=40)}([function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}},function(e,t,n){var i=n(6),o=n(24);e.exports=function(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?o(e):t}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var i=n(25);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}},function(e,t,n){"use strict";e.exports=n(27)},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){var i=n(21),o=n(22),r=n(23);e.exports=function(e){return i(e)||o(e)||r()}},function(e,t,n){e.exports=n(39)},function(e,t,n){n(5);e.exports=function(e){"use strict";e=e||{};var t="",i=(arguments[1],function(e){return t+=e});return t+='<div class="one-player">\r\n    ',i(n(29)(e)),t+="\r\n    ",i(n(30)(e)),t+="\r\n    ",i(n(31)(e)),t+="\r\n    ",i(n(32)(e)),t+="\r\n    ",i(n(33)(e)),t+="\r\n    ",i(n(34)(e)),t+="\r\n    ",i(n(35)(e)),t+="\r\n    ",i(n(36)(e)),t+="\r\n    ",i(n(37)(e)),t+="\r\n    ",i(n(38)(e)),t+="\r\n</div>\r\n"}},function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 18 18" enable-background="new 0 0 18 18" xml:space="preserve"><path d="M2 1 L9 5 C 9,5 9,5 9,5 L9 13 C9,13 9,13 9,13 L2 17 M9,5 L16 9 C16,9 16,9 16,9 L16 9 C16,9 16,9 16,9 L9,13"></path></svg>'},function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 18 18" enable-background="new 0 0 18 18" xml:space="preserve"><path d="M3 1 L6 1 C 6.4,1 7,1.6 7,2 L7 16 C7,16.4 6.4,16.6 6,17 L3 17 M12 1 L15 1 C15.4,1 16,1.6 16,2 L16 16 C16,16.4 15.4,17 15,17 L12 17"></path></svg>'},function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 18 18" enable-background="new 0 0 18 18" xml:space="preserve"><path d="m0,3l12,12c0.74561,0.64211 1.49123,0.53684 2,0c0.49123,-0.57018 0.49123,-1.44561 0,-2l-12.10406,-12.06897c-0.57718,-0.40929 -1.19068,-0.09594 -1.58015,0.38476c-0.49123,0.61053 -0.70175,1.17664 -0.03509,1.96491"></path><path stroke="none" d="M0,7C0,6.6 0.5,6 1,6 L9,14 L9,12L3,6L3,6L9,1L9,17L3,12L0,12"></path><path d="m11,9c0,0 0,0 0,0c0,0 0,0 0,0z"></path><path d="M11,2C14,3.5 16,6 16,9C16,12 14,15 11,16L11,16C14,15 16,12 16,9C16,6 14,3.5 11,2"></path></svg>'},function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 11 11" enable-background="new 0 0 11 11" xml:space="preserve"><path fill="#060001" d="M5.5,0C8.537,0,11,2.462,11,5.5C11,8.537,8.537,11,5.5,11C2.462,11,0,8.536,0,5.5C0,2.462,2.462,0,5.5,0z"></path></svg>'},function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 18 18" enable-background="new 0 0 18 18" xml:space="preserve"><path d="M16,17h-4v-2h4v-4h2v4v2H16z M16,3h-4V1h4h2v2v4h-2V3z M0,17v-2v-4h2v4h4v2H2H0z M2,7H0V3V1h2h4v2H2V7z"></path></svg>'},function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 18 18" enable-background="new 0 0 18 18" xml:space="preserve"><path d="M14,13v4h-2v-4v-2h2h4v2H14z M12,7V5V1h2v4h4v2h-4H12z M4,13H0v-2h4h2v2v4H4V13z M0,7V5h4V1h2v4v2H4H0z"></path></svg>'},function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 18 18" enable-background="new 0 0 18 18" xml:space="preserve"><path d="M10,17H8H2c-1.104,0-2-0.896-2-2V7V5V2l5,5H2v4v2v1c0,0.552,0.447,1,1,1h1h2h2.5H10h0.5c0.275,0,0.5,0.225,0.5,0.5 s0,0.5,0,0.5v1H10z"></path><path d="M8,1h2h6c1.104,0,2,0.896,2,2v8v2v3l-5-5h3V7V5V4c0-0.553-0.447-1-1-1h-1h-2H9.5H8H7.5C7.224,3,7,2.776,7,2.5S7,2,7,2V1H8z"></path></svg>'},function(e,t){e.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 19 19" enable-background="new 0 0 19 19" xml:space="preserve"><path opacity="0.3" fill="#040000" d="M9.5,0C14.747,0,19,4.253,19,9.5S14.747,19,9.5,19S0,14.747,0,9.5S4.253,0,9.5,0z"></path><path d="M9.501,4C12.538,4,15,6.462,15,9.5c0,3.037-2.462,5.5-5.499,5.5C6.463,15,4,12.537,4,9.5C4,6.462,6.463,4,9.501,4z"></path></svg>'},function(e,t){e.exports='<svg viewBox="0 -1.5 21 21" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><defs><clipPath id="danmu-animation-mask"><rect transform="rotate(-35.42460250854492 5.2586154937744185,15.743067741394041) " height="32.03465" width="14.62944" y="-0.27426" x="-2.0561"></rect><rect transform="rotate(-35.42460250854492 19.095224380493168,5.730149269104002) " height="32.03465" width="14.62944" y="-10.28718" x="11.78051"></rect><rect class="danmu-animation-mover" x="10.88679" y="-6.14148" width="3.18063" height="34.26939" transform="rotate(-35.42460250854492,12.477108955383303,10.993218421936033) translate(0,30) "></rect></clipPath></defs><path clip-path="url(#danmu-animation-mask)" fill-rule="evenodd" fill="#060001" d="m14,9.5l-8,0c-0.553,0 -1,0.447 -1,1s0.447,1 1,1l8,0c0.553,0 1,-0.447 1,-1s-0.447,-1 -1,-1zm0,-4c-0.553,0 -1,0.447 -1,1s0.447,1 1,1s1,-0.447 1,-1s-0.447,-1 -1,-1zm4,-5l-16,0c-1.104,0 -2,0.896 -2,2l0,12c0,1.104 0.896,2 2,2l2,0l0,2l1,1l2,0l4.2,-3l6.8,0c1.104,0 2,-0.896 2,-2l0,-12c0,-1.104 -0.896,-2 -2,-2zm0,13c0,0.553 -0.447,1 -1,1l-7,0l-4,3l0,-2l-1,-1l-2,0c-0.553,0 -1,-0.447 -1,-1l0,-10c0,-0.553 0.447,-1 1,-1l14,0c0.553,0 1,0.447 1,1l0,10zm-12,-6l4,0c0.553,0 1,-0.447 1,-1s-0.447,-1 -1,-1l-4,0c-0.553,0 -1,0.447 -1,1s0.447,1 1,1z"></path><path class="danmu-animation-line" d="m6.20732,0.315l12.64368,17.694c0.48012,0.57515 1.09929,0.73742 1.658,0.262c0.48012,-0.32762 0.6989,-1.01162 0.262,-1.649l-12.673,-17.65c-0.37484,-0.43556 -0.84533,-0.58696 -1.47565,-0.19229c-0.63032,0.39466 -0.81804,0.84686 -0.38335,1.53529" id="svg_1" fill="black"></path></svg>'},function(e,t,n){},function(e,t){window.console.log("%c ".concat("one-player"," v").concat("1.0.0"," "),"background: black; color: white")},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){function n(t,i){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,i)}e.exports=n},function(e,t){!function(){if("undefined"!=typeof window)try{var e=new window.CustomEvent("test",{cancelable:!0});if(e.preventDefault(),!0!==e.defaultPrevented)throw new Error("Could not prevent default")}catch(e){var t=function(e,t){var n,i;return(t=t||{}).bubbles=!!t.bubbles,t.cancelable=!!t.cancelable,(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i=n.preventDefault,n.preventDefault=function(){i.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},n};t.prototype=window.Event.prototype,window.CustomEvent=t}}()},function(e,t,n){"use strict";(function(t){var n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},i=Object.create(n),o=/["&'<>]/;i.$escape=function(e){return function(e){var t=""+e,n=o.exec(t);if(!n)return e;var i="",r=void 0,s=void 0,a=void 0;for(r=n.index,s=0;r<t.length;r++){switch(t.charCodeAt(r)){case 34:a="&#34;";break;case 38:a="&#38;";break;case 39:a="&#39;";break;case 60:a="&#60;";break;case 62:a="&#62;";break;default:continue}s!==r&&(i+=t.substring(s,r)),s=r+1,i+=a}return s!==r?i+t.substring(s,r):i}(function e(t){"string"!=typeof t&&(t=null==t?"":"function"==typeof t?e(t.call(t)):JSON.stringify(t));return t}(e))},i.$each=function(e,t){if(Array.isArray(e))for(var n=0,i=e.length;n<i;n++)t(e[n],n);else for(var o in e)t(e[o],o)},e.exports=i}).call(this,n(28))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var i=n(5);e.exports=function(e){"use strict";var t="",n=(e=e||{}).live,o=i.$escape,r=e.text;return n&&(t+='\r\n<div class="one-player--live">\r\n    <div>',t+=o(r.liveTag),t+="</div>\r\n</div>\r\n"),t+="\r\n"}},function(e,t,n){n(5);e.exports=function(e){"use strict";e=e||{};return'<div class="one-player--tool-tip"></div>\r\n','<div class="one-player--tool-tip"></div>\r\n'}},function(e,t,n){n(5);e.exports=function(e){"use strict";e=e||{};return'<div class="one-player--context"></div>\r\n','<div class="one-player--context"></div>\r\n'}},function(e,t,n){var i=n(5);e.exports=function(e){"use strict";var t="",n=(e=e||{}).cover,o=e.coverType,r=i.$escape;return n&&(t+='\r\n<div class="one-player--cover',o&&(t+=" one-player--cover-type-",t+=r(o)),t+='" style="background-image: url(',t+=r(n),t+=')"></div>\r\n'),t+="\r\n"}},function(e,t,n){n(5);e.exports=function(e){"use strict";var t="";return t+='<div class="one-player--bezel">\n    <div class="one-player--bezel-content">\n        <div class="one-player--loading"></div>\n        <div class="one-player--message-tip"><span></span><strong></strong></div>\n    </div>\n    <div class="one-player--icon one-player--bezel-play-status">\n        ',t+=(e=e||{}).icon.play,t+="\n    </div>\n</div>\n"}},function(e,t,n){var i=n(5);e.exports=function(e){"use strict";var t="",n=(e=e||{}).danMu,o=i.$escape;return n.enable&&(t+='\r\n<div class="one-player--dan-mu" style="top:',t+=o(n.topSpace),t+='px;"></div>\r\n'),t+="\r\n"}},function(e,t,n){var i=n(5);e.exports=function(e){"use strict";var t="",n=(e=e||{}).autoPlay,o=e.muted,r=i.$escape,s=e.preload,a=e.playsInline;return t+="<video\n",n&&(t+=" autoplay "),t+="\n",o&&(t+=" muted "),t+='\npreload="',t+=r(s),t+='"\n',a&&(t+=" webkit-playsinline playsinline "),t+='\n></video>\n<div class="one-player--video-mask"></div>\n'}},function(e,t,n){var i=n(5);e.exports=function(e){"use strict";var t="",n=(e=e||{}).live,o=e.icon,r=e.comment,s=i.$escape,a=e.text,l=e.danMu,u=e.quality,c=i.$each,h=(e.$value,e.$index,e.canFull);return t+='<div class="one-player--control-bar">\r\n    ',n||(t+='\r\n    <div class="one-player--progress">\r\n        <div class="one-player--progress-bg"></div>\r\n        <div class="one-player--progress-loaded"></div>\r\n        <div class="one-player--progress-hover"><i></i></div>\r\n        <div class="one-player--progress-play">\r\n            <div class="one-player--icon one-player--progress-drag">\r\n                ',t+=o.drag,t+="\r\n            </div>\r\n        </div>\r\n    </div>\r\n    "),t+='\r\n    <div class="one-player--control">\r\n        <div class="one-player--control-item">\r\n            <button type="button" class="one-player--icon one-player--play-button">\r\n                ',t+=o.play,t+='\r\n            </button>\r\n        </div>\r\n        <div class="one-player--control-item one-player--control-item-volume">\r\n            <div class="one-player--volume">\r\n                <button type="button" class="one-player--icon one-player--volume-button">\r\n                    ',t+=o.volume,t+='\r\n                </button>\r\n                <div class="one-player--volume-progress">\r\n                    <div class="one-player--volume-progress-now">\r\n                        <div class="one-player--icon one-player--volume-progress-drag">\r\n                            ',t+=o.volumeDrag,t+="\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        ",n||(t+='\r\n        <div class="one-player--control-item one-player--control-item-time">\r\n            <span class="one-player--time">\r\n                <span class="one-player--current-time"></span> / <span\r\n                    class="one-player--total-time"></span>\r\n            </span>\r\n            <span class="one-player--countdown"></span>\r\n        </div>\r\n        '),t+="\r\n        ",r.enable&&(t+='\r\n        <div class="one-player--control-item one-player--control-item-comment">\r\n            <div class="one-player--comment">\r\n                <input type="text"\r\n                       placeholder="',t+=s(a.commentPlaceholder),t+='"\r\n                       ',r.maxLength&&(t+=' maxlength="',t+=s(r.maxLength),t+='" '),t+='\r\n                >\r\n                <i></i>\r\n                <button type="button" disabled>',t+=s(a.commentButton),t+="</button>\r\n            </div>\r\n        </div>\r\n        "),t+='\r\n        <div class="one-player--control-right">\r\n            ',l.enable&&(t+='\r\n            <div class="one-player--control-item">\r\n                <button type="button" class="one-player--icon one-player--dan-mu-button">\r\n                    ',t+=o.danMuOn,t+="\r\n                </button>\r\n            </div>\r\n            "),t+="\r\n            ",u&&u.length&&(t+='\r\n            <div class="one-player--control-item one-player--quality">\r\n                <div class="one-player--quality-list">\r\n                    <ul>\r\n                        ',c(u,(function(e,n){t+='\r\n                        <li data-index="',t+=s(n),t+='" ',0===n&&(t+=' class="one-player--quality-list-active" '),t+=">",t+=s(e.name),t+="</li>\r\n                        "})),t+='\r\n                    </ul>\r\n                </div>\r\n                <div class="one-player--quality-active">',t+=s(u[0].name),t+="</div>\r\n            </div>\r\n            "),t+='\r\n            <div class="one-player--control-item">\r\n                <button type="button" class="one-player--icon one-player--fresh-button">\r\n                    ',t+=o.fresh,t+="\r\n                </button>\r\n            </div>\r\n            ",h&&(t+='\r\n            <div class="one-player--control-item">\r\n                <button type="button" class="one-player--icon one-player--full-button">\r\n                    ',t+=o.full,t+="\r\n                </button>\r\n            </div>\r\n            "),t+="\r\n        </div>\r\n    </div>\r\n</div>\r\n"}},function(e,t,n){var i=n(5);e.exports=function(e){"use strict";e=e||{};var t="",n=i.$escape,o=e.text;return t+='<div class="one-player--context-menu one-player-hide" tabIndex="1">\n    <div class="one-player--context-menu-version"></div>\n    <div class="one-player--context-menu-copy-url">',t+=n(o.contextMenu.copyUrl),t+='</div>\n    <div class="one-player--context-menu-stats">',t+=n(o.contextMenu.stats),t+='</div>\n    <div class="one-player--context-menu-pip one-player-hide">',t+=n(o.contextMenu.pip),t+='</div>\n    <div class="one-player--context-menu-reset one-player-hide">',t+=n(o.contextMenu.reset),t+="</div>\n</div>\n"}},function(e,t,n){n(5);e.exports=function(e){"use strict";e=e||{};return'<div class="one-player--stats one-player-hide">\r\n    <button type="button" title="close" class="one-player--stats-close">[x]</button>\r\n    <div>\r\n        <span class="one-player--stats-label">Viewport</span>\r\n        <span class="one-player--stats-viewport"></span>\r\n    </div>\r\n    <div>\r\n        <span class="one-player--stats-label">Resolution</span>\r\n        <span class="one-player--stats-resolution"></span>\r\n    </div>\r\n    <div>\r\n        <span class="one-player--stats-label">Format</span>\r\n        <span class="one-player--stats-format"></span>\r\n    </div>\r\n    <div>\r\n        <span class="one-player--stats-label">Connection Speed</span>\r\n        <span class="one-player--stats-speed-chart">\r\n            <svg preserveAspectRatio="xMinYMid meet">\r\n                <polyline />\r\n            </svg>\r\n        </span>\r\n        <span class="one-player--stats-speed"></span>\r\n    </div>\r\n    <div>\r\n        <span class="one-player--stats-label">Network Activity</span>\r\n        <span class="one-player--stats-network"></span>\r\n    </div>\r\n    <div>\r\n        <span class="one-player--stats-label">Dropped Frames</span>\r\n        <span class="one-player--stats-dropped-frames"></span>\r\n    </div>\r\n</div>\r\n','<div class="one-player--stats one-player-hide">\r\n    <button type="button" title="close" class="one-player--stats-close">[x]</button>\r\n    <div>\r\n        <span class="one-player--stats-label">Viewport</span>\r\n        <span class="one-player--stats-viewport"></span>\r\n    </div>\r\n    <div>\r\n        <span class="one-player--stats-label">Resolution</span>\r\n        <span class="one-player--stats-resolution"></span>\r\n    </div>\r\n    <div>\r\n        <span class="one-player--stats-label">Format</span>\r\n        <span class="one-player--stats-format"></span>\r\n    </div>\r\n    <div>\r\n        <span class="one-player--stats-label">Connection Speed</span>\r\n        <span class="one-player--stats-speed-chart">\r\n            <svg preserveAspectRatio="xMinYMid meet">\r\n                <polyline />\r\n            </svg>\r\n        </span>\r\n        <span class="one-player--stats-speed"></span>\r\n    </div>\r\n    <div>\r\n        <span class="one-player--stats-label">Network Activity</span>\r\n        <span class="one-player--stats-network"></span>\r\n    </div>\r\n    <div>\r\n        <span class="one-player--stats-label">Dropped Frames</span>\r\n        <span class="one-player--stats-dropped-frames"></span>\r\n    </div>\r\n</div>\r\n'}},function(e,t,n){var i=function(e){"use strict";var t,n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function l(e,t,n,i){var o=t&&t.prototype instanceof m?t:m,r=Object.create(o.prototype),s=new M(i||[]);return r._invoke=function(e,t,n){var i=c;return function(o,r){if(i===p)throw new Error("Generator is already running");if(i===d){if("throw"===o)throw r;return A()}for(n.method=o,n.arg=r;;){var s=n.delegate;if(s){var a=x(s,n);if(a){if(a===v)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===c)throw i=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var l=u(e,t,n);if("normal"===l.type){if(i=n.done?d:h,l.arg===v)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=d,n.method="throw",n.arg=l.arg)}}}(e,n,s),r}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var c="suspendedStart",h="suspendedYield",p="executing",d="completed",v={};function m(){}function y(){}function f(){}var _={};_[r]=function(){return this};var g=Object.getPrototypeOf,w=g&&g(g(E([])));w&&w!==n&&i.call(w,r)&&(_=w);var k=f.prototype=m.prototype=Object.create(_);function L(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function b(e){var t;this._invoke=function(n,o){function r(){return new Promise((function(t,r){!function t(n,o,r,s){var a=u(e[n],e,o);if("throw"!==a.type){var l=a.arg,c=l.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then((function(e){t("next",e,r,s)}),(function(e){t("throw",e,r,s)})):Promise.resolve(c).then((function(e){l.value=e,r(l)}),(function(e){return t("throw",e,r,s)}))}s(a.arg)}(n,o,t,r)}))}return t=t?t.then(r,r):r()}}function x(e,n){var i=e.iterator[n.method];if(i===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=u(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var r=o.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function E(e){if(e){var n=e[r];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,s=function n(){for(;++o<e.length;)if(i.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}return{next:A}}function A(){return{value:t,done:!0}}return y.prototype=k.constructor=f,f.constructor=y,f[a]=y.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},L(b.prototype),b.prototype[s]=function(){return this},e.AsyncIterator=b,e.async=function(t,n,i,o){var r=new b(l(t,n,i,o));return e.isGeneratorFunction(n)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},L(k),k[a]="Generator",k[r]=function(){return this},k.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=E,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(i,o){return a.type="throw",a.arg=e,n.next=i,o&&(n.method="next",n.arg=t),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var l=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(l&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=e,s.arg=t,r?(this.method="next",this.next=r.finallyLoc,v):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;T(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:E(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=i}catch(e){Function("r","regeneratorRuntime = r")(i)}},function(e,t,n){"use strict";n.r(t);n(19),n(20);var i=n(7),o=n.n(i),r=n(0),s=n.n(r),a=n(1),l=n.n(a),u=n(2),c=n.n(u),h=n(3),p=n.n(h),d=n(4),v=n.n(d),m=(n(26),n(9)),y=n.n(m),f=n(10),_=n.n(f),g=n(11),w=n.n(g),k=n(12),L=n.n(k),b=n(13),x=n.n(b),C=n(14),T=n.n(C),M=n(15),E=n.n(M),A=n(16),S=n.n(A),O=n(17),P=n.n(O),R=n(18),D={danMu:n.n(R).a,drag:P.a,fresh:S.a,cancelFull:E.a,full:T.a,volume:L.a,volumeDrag:x.a,pause:w.a,play:_.a},B=function(){function e(t){s()(this,e),this.player=t,this.data=Object.assign(this.player.opt,{icon:D}),this.container=this.player.opt.container,this._render()}return l()(e,[{key:"_render",value:function(){this.container.innerHTML=y()(this.data),this.playerWhole=this.container.querySelector(".one-player"),this.video=this.container.querySelector("video"),this.videoMask=this.container.querySelector(".one-player--video-mask"),this.cover=this.container.querySelector(".one-player--cover"),this.live=this.container.querySelector(".one-player--live"),this.toolTip=this.container.querySelector(".one-player--tool-tip"),this.playButton=this.container.querySelector(".one-player--play-button"),this.bezel=this.container.querySelector(".one-player--bezel"),this.loading=this.container.querySelector(".one-player--loading"),this.messageTip=this.container.querySelector(".one-player--message-tip span"),this.messageHandleButton=this.container.querySelector(".one-player--message-tip strong"),this.bezelPlayStatus=this.container.querySelector(".one-player--bezel-play-status"),this.controlBar=this.container.querySelector(".one-player--control-bar"),this.progress=this.container.querySelector(".one-player--progress"),this.progressLoaded=this.container.querySelector(".one-player--progress-loaded"),this.progressHover=this.container.querySelector(".one-player--progress-hover"),this.progressPlay=this.container.querySelector(".one-player--progress-play"),this.progressDrag=this.container.querySelector(".one-player--progress-drag"),this.time=this.container.querySelector(".one-player--time"),this.currentTime=this.container.querySelector(".one-player--current-time"),this.totalTime=this.container.querySelector(".one-player--total-time"),this.countdown=this.container.querySelector(".one-player--countdown"),this.fullButton=this.container.querySelector(".one-player--full-button"),this.volumeButton=this.container.querySelector(".one-player--volume-button"),this.freshButton=this.container.querySelector(".one-player--fresh-button"),this.volume=this.container.querySelector(".one-player--volume"),this.volumeProgress=this.container.querySelector(".one-player--volume-progress"),this.volumeProgressNow=this.container.querySelector(".one-player--volume-progress-now"),this.volumeProgressDrag=this.container.querySelector(".one-player--volume-progress-drag"),this.quality=this.container.querySelector(".one-player--quality"),this.qualityActive=this.container.querySelector(".one-player--quality-active"),this.qualityList=this.container.querySelector(".one-player--quality-list"),this.danMu=this.container.querySelector(".one-player--dan-mu"),this.danMuButton=this.container.querySelector(".one-player--dan-mu-button"),this.comment=this.container.querySelector(".one-player--control-item-comment"),this.commentInput=this.container.querySelector(".one-player--control-item-comment input"),this.commentButton=this.container.querySelector(".one-player--control-item-comment button"),this.contextMenu=this.container.querySelector(".one-player--context-menu"),this.contextMenuVersion=this.container.querySelector(".one-player--context-menu-version"),this.contextMenuStats=this.container.querySelector(".one-player--context-menu-stats"),this.contextMenuPip=this.container.querySelector(".one-player--context-menu-pip"),this.contextMenuReset=this.container.querySelector(".one-player--context-menu-reset"),this.contextMenuCopyUrl=this.container.querySelector(".one-player--context-menu-copy-url"),this.stats=this.container.querySelector(".one-player--stats"),this.statsClose=this.container.querySelector(".one-player--stats-close"),this.statsResolution=this.container.querySelector(".one-player--stats-resolution"),this.statsDroppedFrames=this.container.querySelector(".one-player--stats-dropped-frames"),this.statsViewport=this.container.querySelector(".one-player--stats-viewport"),this.statsFormat=this.container.querySelector(".one-player--stats-format"),this.statsSpeed=this.container.querySelector(".one-player--stats-speed"),this.statsSpeedChart=this.container.querySelector(".one-player--stats-speed-chart"),this.statsNetwork=this.container.querySelector(".one-player--stats-network")}}]),e}(),q=window.navigator.userAgent,F=q.indexOf("Edge")>-1,V=(q.indexOf("Trident"),q.indexOf("Presto"),q.indexOf("AppleWebKit"),q.indexOf("Gecko")>-1&&q.indexOf("KHTML"),!!q.match(/AppleWebKit.*Mobile.*/)),H=(q.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),q.indexOf("Android")>-1||q.indexOf("Adr"),q.indexOf("iPhone"),q.indexOf("iPad"),q.indexOf("Safari"),q.indexOf("MicroMessenger"),q.match(/QQ/i),{});["SOURCE_CHANGE","RELOAD","AUTO_RECOVER","BEFORE_AUTO_RELOAD","AUTO_RELOAD","COMMENT","LOAD","READY","BROWSER_AUTO_PLAY_BLOCKED","DAN_MU_VISIBLE_CHANGE","VIDEO_SIZE_CHANGE","EVENT","ERROR","ERROR_TIP","LOG","USER_ACTIVE_CHANGE","DRAG_END","QUALITY_CHANGE","FULLSCREEN_CHANGE","VOLUME_CHANGE","TIMEOUT","STOP_TIMEOUT","CLICK_VIDEO","BEFORE_DESTROY","DESTROY"].forEach((function(e){H[e]="".concat("IGGFE_").concat(e)}));var N=H,I=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"],U=["loadstart","waiting"],z=["loadeddata","pause","canplay","canplaythrough","ended"];F&&z.push("progress");var j=function e(){var t=this;s()(this,e),Object.getOwnPropertyNames(this.constructor.prototype).forEach((function(e){t[e]=t[e].bind(t)}))},G=function(e){function t(e){var n;return s()(this,t),(n=c()(this,p()(t).call(this))).player=e,n.template=n.player.template,n._initListener(),n}return v()(t,e),l()(t,[{key:"_initListener",value:function(){var e=this;this.player.on(N.USER_ACTIVE_CHANGE,(function(t){t.detail.active||e.hide()})),this.player.on(N.FULLSCREEN_CHANGE,(function(){e.hide()}))}},{key:"show",value:function(e,t,n){if(t.offsetParent){this.template.toolTip.textContent=e,this.template.toolTip.style.display="block";var i=this._computeOffset(t,n);this.template.toolTip.style.left=i.left+"px",this.template.toolTip.style.top=i.top+"px"}else this.hide()}},{key:"_computeOffset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:13,n=e.getBoundingClientRect(),i=this.template.playerWhole.getBoundingClientRect(),o=this.template.toolTip.offsetWidth;return{left:Math.max(o/2,Math.min(n.left-i.left+n.width/2,i.width-o/2)),top:n.top-i.top-t}}},{key:"hide",value:function(){this.template.toolTip.style.display="none"}}]),t}(j),Q=n(6),W=n.n(Q),Y=!1;try{var K=Object.defineProperty({},"passive",{get:function(){Y=!0}});window.addEventListener("testPassive",null,K),window.removeEventListener("testPassive",null,K)}catch(e){}function $(e){e=parseInt(e,10);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=e%60;return!(t=t?t+":":"")||n>=10?n+=":":n="0"+n+":",i<10&&(i="0"+i),t+n+i}function X(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}function Z(e){return/\.m3u8$/i.test(e)}function J(e,t){var n=-1;return e.some((function(e,i,o){var r=t(e,i,o);return r&&(n=i),r})),n}function ee(e){var t=e.getBoundingClientRect(),n=e.parentElement.getBoundingClientRect(),i=t.right;return t.width||(i=t.right+e.scrollWidth),{left:Math.round(t.left-n.left),top:Math.round(t.top-n.top),right:Math.round(n.right-i),bottom:Math.round(n.bottom-t.bottom)}}function te(e){return-1!==J(["wheel","mousewheel","touchstart","touchmove"],(function(t){return t===e}))}function ne(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Array.isArray(t)||(t=[t]),t.forEach((function(t){Y&&te(t)?e.addEventListener(t,n,{passive:!0}):e.addEventListener(t,n,i)}))}function ie(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Array.isArray(t)||(t=[t]),t.forEach((function(t){Y&&te(t)?e.removeEventListener(t,n,{passive:!0}):e.removeEventListener(t,n,i)}))}function oe(e){e.classList.add("one-player-hide")}function re(e){e.classList.remove("one-player-hide")}function se(e){return e.clientWidth||e.scrollWidth}function ae(e){return e.clientHeight}var le=function(){function e(t){s()(this,e),window.ResizeObserver?this.ro=new window.ResizeObserver(t):ne(window,"resize",t)}return l()(e,[{key:"observe",value:function(e){this.ro?this.ro.observe(e):window.dispatchEvent(new window.CustomEvent("resize"))}}]),e}(),ue=function(e){function t(e,n){var i;return s()(this,t),(i=c()(this,p()(t).call(this))).el=e,i.initListener(),i.player=n,i}return v()(t,e),l()(t,[{key:"initListener",value:function(){ne(this.el,["mousedown","touchstart"],this._start),ne(this.el,["click"],(function(e){e.stopPropagation()}))}},{key:"_getClientOffset",value:function(e){return e.clientX?[e.clientX,e.clientY]:e.changedTouches&&e.changedTouches[0]?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[]}},{key:"_onDrag",value:function(e){if(this._enable){var t=this._getClientOffset(e);this.el.offsetParent?this._onDragHandler&&this._onDragHandler(t[0]-this._startX,t[1]-this._startY):this._stop(e)}}},{key:"onDragStart",value:function(e){this._onDragStartHandler=e}},{key:"onDrag",value:function(e){this._onDragHandler=e}},{key:"onDragEnd",value:function(e){this._onDragEndHandler=e}},{key:"isDragging",value:function(){return!!this._enable}},{key:"_stop",value:function(e){var t=this._getClientOffset(e);this._enable=!1,ie(document,"mouseup",this._onMouseUpListener),ie(document,"mousemove",this._onDragListener),ie(this.el,"touchend",this._onMouseUpListener),ie(this.el,"touchmove",this._onDragListener),this._onDragEndHandler&&this._onDragEndHandler(t[0]-this._startX,t[1]-this._startY),this.player.emit(N.DRAG_END)}},{key:"_onDragListener",value:function(e){this._onDrag(e)}},{key:"_onMouseUpListener",value:function(e){this._stop(e)}},{key:"_start",value:function(e){var t=this._getClientOffset(e);this._startX=t[0],this._startY=t[1],this._enable=!0,ne(document,"mouseup",this._onMouseUpListener),ne(document,"mousemove",this._onDragListener),ne(this.el,"touchend",this._onMouseUpListener),ne(this.el,"touchmove",this._onDragListener),this._onDragStartHandler&&this._onDragStartHandler(this._startX,this._startY)}}]),t}(j),ce=function(){function e(t,n,i,o,r){s()(this,e),this.dir=1,this.rID=null,this.cf=0,this.NF=20,this.path=i,this.attr=r||"d",this.status="",this.O={d:{ini:this.pathToArray(t),fin:this.pathToArray(n),afn:function(e){return e.join(" ")},tfn:o||"ease-in-out"}},this.setRng()}return l()(e,[{key:"reverse",value:function(){var e=[this.O.d.fin,this.O.d.ini];return this.O.d.ini=e[0],this.O.d.fin=e[1],this}},{key:"setStatus",value:function(e){return this.status=e,this}},{key:"setIni",value:function(e){return this.O.d.ini=this.pathToArray(e),this}},{key:"setFin",value:function(e){return this.O.d.fin=this.pathToArray(e),this}},{key:"reset",value:function(){return this.cf=0,this}},{key:"setRng",value:function(){return this.O.d.rng=this.range(this.O.d.ini,this.O.d.fin),this}},{key:"update",value:function(){var t;this.cf+=this.dir;var n=this.cf/this.NF,i=this.O.d;(t=this.path).setAttribute.apply(t,[this.attr,i.afn(this.int(i.ini,i.rng,e.TFN[i.tfn],n))]),this.cf%this.NF?this.rID=window.requestAnimationFrame(this.update.bind(this)):this.stopAni()}},{key:"int",value:function(e,t,n,i){var o=this;return"number"==typeof e?e+n(i)*t:"string"==typeof e?e:e.map((function(r,s){return o.int(e[s],t[s],n,i)}))}},{key:"range",value:function(e,t){var n=this;return"object"===W()(e)?e.map((function(i,o){return n.range(e[o],t[o])})):"number"!=typeof+e||isNaN(e)?e:+t-+e}},{key:"stopAni",value:function(){window.cancelAnimationFrame(this.rID),this.rID=null}},{key:"pathToArray",value:function(e){for(var t=/[a-zA-Z][\s*\d\-.,]+/g,n="",i=[];n=t.exec(e);){var o=n[0],r=o.substr(1,o.length).replace(/,/g," ").trim().split(" "),s=o.substr(0,1)===o.substr(0,1).toUpperCase();i.push(o.substr(0,1).toUpperCase()),s?i=i.concat(r.map((function(e){return+e}))):r.forEach((function(e,t){var n=0;t<=1?n=/\d/.test(i[i.length-3])&&i[i.length-3]:t<=3?n=/\d/.test(i[i.length-5])&&i[i.length-5]:t<=5&&(n=/\d/.test(i[i.length-7])&&i[i.length-7]),n=+n+ +e,i.push(n)}))}return i}}]),e}();ce.TFN={"ease-out":function(e){return 1-Math.pow(1-e,1.675)},"ease-in-out":function(e){return.5*(Math.sin((e-.5)*Math.PI)+1)},"bounce-ini-fin":function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-.65*Math.PI,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-t;return(Math.sin(e*(n-t)+t)-Math.sin(t))/(Math.sin(n)-Math.sin(t))}};var he=function(e){function t(e){var n;return s()(this,t),(n=c()(this,p()(t).call(this))).player=e,n.template=n.player.template,n._init(),n}return v()(t,e),l()(t,[{key:"_init",value:function(){this._initBasic(),this._initVolumeAnimation(),this._initVolume(),this._initFull(),this._initPlay(),this._initTime(),this._initCountdown(),this._initProgress(),this._initFresh(),this._initDanMu(),this._initComment()}},{key:"_initFresh",value:function(){var e=this;ne(this.template.freshButton,"click",(function(){e.player.reload()})),V||(ne(this.template.freshButton,["mouseenter","click"],(function(){e.player.toolTip.show(e.player.opt.text.freshButtonTip,e.template.freshButton.parentElement)})),ne(this.template.freshButton,"mouseleave",this._hideToolTip))}},{key:"_initBasic",value:function(){var e=this;this.player.isPaused()&&this._showControlBar(),this.player.on("loadedmetadata",(function(){e._updateVolumeButton(),e._updateVolumeProgress()})),this.player.on(N.USER_ACTIVE_CHANGE,(function(t){t.detail.active?e._showControlBar():e._hideControlBar()})),this._isMouseEnter=!1,ne(this.template.controlBar,"mouseenter",(function(t){e._isMouseEnter=!0})),ne(this.template.controlBar,"mouseleave",(function(t){e._isMouseEnter=!1}))}},{key:"_initProgress",value:function(){var e=this;this.player.opt.live||(this._progressDrag=new ue(this.template.progressDrag,this.player),this.player.on("timeupdate",(function(){e._progressDrag.isDragging()||e._updateProgressPlay()})),this.player.on("progress",this._updateProgressLoaded),ne(this.template.progress,"mousemove",this._updateProgressHover),ne(this.template.progress,"mouseleave",(function(){e._hideProgressHover(),e._hideToolTip()})),V||(ne(this.template.progress,"mouseenter",(function(){e._isMouseEnterProgress=!0,e._showProgressDrag()})),ne(this.template.progress,"mouseleave",(function(){e._isMouseEnterProgress=!1,e._hideProgressDrag()}))),ne(this.template.progress,"click",(function(t){var n=e.template.progress.offsetWidth;e._seek(t.offsetX/n)})),this._progressDrag.onDragStart((function(){e._adjustProgressStartWidth=e.template.progressPlay.offsetWidth})),this._progressDrag.onDrag((function(t,n){e._adjustProgress(t),e._showTimeToolTip(t)})),this._progressDrag.onDragEnd((function(t,n){e._adjustProgress(t,!0),e._hideProgressDrag(),e._hideToolTip()})))}},{key:"_showTimeToolTip",value:function(e){var t=this.player.video.duration;if(t){var n=this._computeProgressPercent(e);this.player.toolTip.show($(t*n),this.template.progressDrag,0)}}},{key:"_computeProgressPercent",value:function(e){var t=this.template.progress.offsetWidth;return Math.min(Math.max(0,this._adjustProgressStartWidth+e),t)/t}},{key:"_hideToolTip",value:function(){this.player.toolTip.hide()}},{key:"_showControlBar",value:function(){this.template.controlBar.classList.add("one-player--control-bar-show")}},{key:"showControlBar",value:function(){this._showControlBar()}},{key:"_hideControlBar",value:function(){this.template.controlBar.classList.remove("one-player--control-bar-show"),this.template.video.removeAttribute("controls")}},{key:"hideControlBar",value:function(){this._hideControlBar()}},{key:"_adjustProgress",value:function(e,t){var n=this._computeProgressPercent(e);this._updateProgressPlay(n),t&&this._seek(n)}},{key:"_showProgressDrag",value:function(){this.template.progress.classList.add("one-player--progress-show")}},{key:"_hideProgressDrag",value:function(){this._progressDrag.isDragging()||this._isMouseEnterProgress||this.template.progress.classList.remove("one-player--progress-show")}},{key:"_initTime",value:function(){var e=this;this.player.opt.live||this.player.opt.showCountdown||(this.player.on("loadedmetadata",(function(t){e._updateCurrentTime(t),e._updateTotalTime()})),this.player.on("timeupdate",this._updateCurrentTime))}},{key:"_initCountdown",value:function(){!this.player.opt.live&&this.player.opt.showCountdown&&(this.template.time.style.display="none",this.player.on("timeupdate",this._updateCountdown))}},{key:"_updateCountdown",value:function(){this.template.countdown.innerHTML=$(this.player.video.duration-this.player.video.currentTime)}},{key:"_showPause",value:function(){this._playAnimation=new ce("M2 1 L9 5 C 9 5 9 5 9 5 L9 13 C9 13 9 13 9 13 L2 17 M9 5 L16 9 C16 9 16 9 16 9 L16 9 C16 9 16 9 16 9 L9 13","M3 1 L6 1 C 6.4 1 7 1.6 7 2 L7 16 C7 16.4 6.4 16.6 6 17 L3 17 M12 1 L15 1 C15.4 1 16 1.6 16 2 L16 16 C16 16.4 15.4 17 15 17 L12 17",this.template.playButton.querySelector("path")),this._playAnimation.update()}},{key:"_showPlay",value:function(){this._playAnimation=new ce("M3 1 L6 1 C 6.4 1 7 1.6 7 2 L7 16 C7 16.4 6.4 16.6 6 17 L3 17 M12 1 L15 1 C15.4 1 16 1.6 16 2 L16 16 C16 16.4 15.4 17 15 17 L12 17","M2 1 L9 5 C 9 5 9 5 9 5 L9 13 C9 13 9 13 9 13 L2 17 M9 5 L16 9 C16 9 16 9 16 9 L16 9 C16 9 16 9 16 9 L9 13",this.template.playButton.querySelector("path")),this._playAnimation.update()}},{key:"_initPlay",value:function(){var e=this;this.player.on("play",this._showPause),this.player.on("pause",this._showPlay),ne(this.template.playButton,"click",(function(){e.player.toggle()})),V||(ne(this.template.playButton,["mouseenter","click"],(function(){e.player.toolTip.show(e.player.isPaused()?e.player.opt.text.playButtonTip:e.player.opt.text.pauseButtonTip,e.template.playButton.parentElement)})),ne(this.template.playButton,"mouseleave",this._hideToolTip))}},{key:"_initFull",value:function(){var e=this;this.player.opt.canFull&&(this.player.on(N.FULLSCREEN_CHANGE,(function(t){e.template.fullButton.innerHTML=t.detail.fullScreen?D.cancelFull:D.full,t.detail.fullScreen&&(e._isMouseEnter=!1)})),ne(this.template.fullButton,"click",(function(){e.player.toggleFullScreen()})),V||(ne(this.template.fullButton,["mouseenter","click"],(function(){e.player.toolTip.show(X()?e.player.opt.text.cancelFullButtonTip:e.player.opt.text.fullButtonTip,e.template.fullButton.parentElement)})),ne(this.template.fullButton,"mouseleave",this._hideToolTip)))}},{key:"_initDanMu",value:function(){var e=this;this.player.opt.danMu.enable&&(this.template.danMuButton.innerHTML=D.danMu,this.player.on(N.DAN_MU_VISIBLE_CHANGE,(function(t){t.detail.visible?(e._danmuLineAnimation=new ce("m6.20732,0.315l12.64368,17.694c0.48012,0.57515 1.09929,0.73742 1.658,0.262c0.48012,-0.32762 0.6989,-1.01162 0.262,-1.649l-12.673,-17.65c-0.37484,-0.43556 -0.84533,-0.58696 -1.47565,-0.19229c-0.63032,0.39466 -0.81804,0.84686 -0.38335,1.53529","M6.20732,0.315L6.20732,0.315C6.20732,0.315 6.20732,0.315 7.1685,-0.3565C7.1685,-0.3565 7.1685,-0.3565 8.098,-1.028L8.098,-1.028 C8.098,-1.028 8.098,-1.028 7.1685,-0.3565C7.1685,-0.3565 7.1685,-0.3565 6.20732,0.315",e.template.danMuButton.querySelector(".danmu-animation-line")),e._danmuLineAnimation.update(),e.template.danMuButton.querySelector(".danmu-animation-mover").setAttribute("transform","rotate(-35.42460250854492,12.477108955383303,10.993218421936033) translate(0, 0)")):(e._danmuLineAnimation=new ce("M6.20732,0.315L6.20732,0.315C6.20732,0.315 6.20732,0.315 7.1685,-0.3565C7.1685,-0.3565 7.1685,-0.3565 8.098,-1.028L8.098,-1.028 C8.098,-1.028 8.098,-1.028 7.1685,-0.3565C7.1685,-0.3565 7.1685,-0.3565 6.20732,0.315","m6.20732,0.315l12.64368,17.694c0.48012,0.57515 1.09929,0.73742 1.658,0.262c0.48012,-0.32762 0.6989,-1.01162 0.262,-1.649l-12.673,-17.65c-0.37484,-0.43556 -0.84533,-0.58696 -1.47565,-0.19229c-0.63032,0.39466 -0.81804,0.84686 -0.38335,1.53529",e.template.danMuButton.querySelector(".danmu-animation-line")),e._danmuLineAnimation.update(),e.template.danMuButton.querySelector(".danmu-animation-mover").setAttribute("transform","rotate(-35.42460250854492,12.477108955383303,10.993218421936033) translate(0, 30)"))})),ne(this.template.danMuButton,"click",(function(){e.player.toggleDanMu()})),V||(ne(this.template.danMuButton,["mouseenter","click"],(function(){e.player.toolTip.show(e.player.isDanMuVisible()?e.player.opt.text.disableDanMuButtonTip:e.player.opt.text.enableDanMuButtonTip,e.template.danMuButton.parentElement)})),ne(this.template.danMuButton,"mouseleave",this._hideToolTip)))}},{key:"toggleComment",value:function(e){this.player.opt.comment.enable&&(e?re(this.template.comment):oe(this.template.comment))}},{key:"clearComment",value:function(){this.template.commentInput.value="",this._triggerCommentChange()}},{key:"setComment",value:function(e){this.template.commentInput.value=e,this._triggerCommentChange()}},{key:"_initComment",value:function(){var e=this;this.player.opt.comment.enable&&(ne(this.template.commentInput,"input",this._triggerCommentChange),ne(this.template.commentInput,"keyup",(function(t){13===t.keyCode&&e._triggerComment()})),ne(this.template.commentButton,"click",this._triggerComment))}},{key:"_triggerComment",value:function(){this.player.emit(N.COMMENT,{content:this._getCommentContent()})}},{key:"_triggerCommentChange",value:function(){this._updateCommentStyle()}},{key:"_getCommentContent",value:function(){return this.player.opt.comment.enable?this.template.commentInput.value:""}},{key:"_updateCommentStyle",value:function(){this._getCommentContent().length>0?this.template.commentButton.removeAttribute("disabled"):this.template.commentButton.setAttribute("disabled","disabled")}},{key:"_initVolume",value:function(){var e=this;this.player.on(N.BROWSER_AUTO_PLAY_BLOCKED,this._showOpenVolumeTip),this.player.on(N.VOLUME_CHANGE,(function(){e._updateVolumeProgress(),e._updateVolumeButton()})),ne(this.template.volumeButton,"click",(function(){e.player.toggleMute()})),ne(this.template.volumeProgress,"click",(function(t){var n=e.template.volumeProgress.offsetWidth;e._setVolume(t.offsetX/n)})),this._volumnDrag=new ue(this.template.volumeProgressDrag,this.player),this._volumnDrag.onDragStart((function(){e._adjustVolumeStartWidth=e.template.volumeProgressNow.offsetWidth})),this._volumnDrag.onDrag((function(t,n){e._adjustVolume(t)})),this._volumnDrag.onDragEnd((function(){e._hideVolume()})),V||(ne(this.template.volume,["mouseenter","click"],this._showVolume),ne(this.template.volume,"mouseenter",(function(){e._isMouseEnterVolume=!0})),ne(this.template.volume,"mouseleave",(function(){e._isMouseEnterVolume=!1,e._hideVolume()})))}},{key:"_showOpenVolumeTip",value:function(){this.player.toolTip.show(this.player.opt.text.mutedTip,this.template.volumeButton.parentElement)}},{key:"_showVolume",value:function(){this.template.volume.classList.add("one-player--volume-show")}},{key:"_hideVolume",value:function(){this._isMouseEnterVolume||this._volumnDrag.isDragging()||this.template.volume.classList.remove("one-player--volume-show")}},{key:"_seek",value:function(e){this.player.video.duration&&(this.player.video.currentTime=this.player.video.duration*e,this._updateProgressPlay())}},{key:"_hideProgressHover",value:function(){this.template.progressHover.style.width="0"}},{key:"_updateProgressHover",value:function(e){var t=this.player.video.duration;if(t){var n=(e.clientX-this.template.progress.getBoundingClientRect().left)/this.template.progress.offsetWidth;n=Math.max(0,Math.min(100,n)),this.template.progressHover.style.width="".concat(100*n,"%"),this.player.toolTip.show($(t*n),this.template.progressHover.querySelector("i"),9)}}},{key:"_updateProgressLoaded",value:function(){var e=this.player.video.duration,t=this.player.video.buffered;if(t.length&&e){for(var n,i,o="rgba(255, 255, 255, .3)",r=["transparent 0%"],s=0;s<t.length;s++)n=Math.round(t.start(s)/e*100),(i=Math.round(t.end(s)/e*100))>n&&r.push("transparent ".concat(n,"%, ").concat(o," ").concat(n,"%, ").concat(o," ").concat(i,"%, transparent ").concat(i,"%"));r.push("transparent 100%"),this.template.progressLoaded.style.background="linear-gradient(to right, ".concat(r,")")}}},{key:"_updateProgressPlay",value:function(e){var t=this.player.video.duration;t&&(e=e||Math.min(1,this.player.video.currentTime/t),this.template.progressPlay.style.width="".concat(Math.round(100*e),"%"))}},{key:"_updateCurrentTime",value:function(e){var t=e&&e.type?e.type:"",n=this.player.video.duration,i=this.player.video.currentTime;!n||"loadedmetadata"===t&&!i&&this._lastTime||(this._lastTime=i,this.template.currentTime.innerHTML=$(i))}},{key:"_updateTotalTime",value:function(){this.template.totalTime.innerHTML=$(this.player.video.duration)}},{key:"_initVolumeAnimation",value:function(){this._volumeOneAnimation=new ce("m0,3l12,12c0.74561,0.64211 1.49123,0.53684 2,0c0.49123,-0.57018 0.49123,-1.44561 0,-2l-12.10406,-12.06897c-0.57718,-0.40929 -1.19068,-0.09594 -1.58015,0.38476c-0.49123,0.61053 -0.70175,1.17664 -0.03509,1.96491","",this.template.volumeButton.querySelector("path:nth-child(1)")).setStatus("muted").reverse(),this._volumeTwoAnimation=new ce("M0,7C0,6.6 0.5,6 1,6 L9,14 L9,12L3,6L3,6L9,1L9,17L3,12L0,12","",this.template.volumeButton.querySelector("path:nth-child(2)")).setStatus("muted").reverse(),this._volumeThreeAnimation=new ce("m11,9c0,0 0,0 0,0c0,0 0,0 0,0z","",this.template.volumeButton.querySelector("path:nth-child(3)")).setStatus("muted").reverse(),this._volumeFourAnimation=new ce("M11,2C14,3.5 16,6 16,9C16,12 14,15 11,16L11,16C14,15 16,12 16,9C16,6 14,3.5 11,2","",this.template.volumeButton.querySelector("path:nth-child(4)")).setStatus("muted").reverse()}},{key:"_stopVolumeAnimation",value:function(){this._volumeOneAnimation.rID&&this._volumeOneAnimation.stopAni(),this._volumeTwoAnimation.rID&&this._volumeTwoAnimation.stopAni(),this._volumeThreeAnimation.rID&&this._volumeThreeAnimation.stopAni(),this._volumeFourAnimation.rID&&this._volumeFourAnimation.stopAni()}},{key:"_updateVolumeButton",value:function(){var e=this.player.getVolume();if(this.player.isMuted()){if("muted"===this._volumeOneAnimation.status)return;return this._stopVolumeAnimation(),this._volumeOneAnimation.reverse().setFin("m0,3l12,12c0.74561,0.64211 1.49123,0.53684 2,0c0.49123,-0.57018 0.49123,-1.44561 0,-2l-12.10406,-12.06897c-0.57718,-0.40929 -1.19068,-0.09594 -1.58015,0.38476c-0.49123,0.61053 -0.70175,1.17664 -0.03509,1.96491").setStatus("muted").reset().setRng(),this._volumeTwoAnimation.reverse().setFin("M0,7C0,6.6 0.5,6 1,6 L9,14 L9,12L3,6L3,6L9,1L9,17L3,12L0,12").setStatus("muted").reset().setRng(),this._volumeThreeAnimation.reverse().setFin("m11,9c0,0 0,0 0,0c0,0 0,0 0,0z").setStatus("muted").reset().setRng(),this._volumeFourAnimation.reverse().setFin("M11,2C14,3.5 16,6 16,9C16,12 14,15 11,16L11,16C14,15 16,12 16,9C16,6 14,3.5 11,2").setStatus("muted").reset().setRng(),this._volumeOneAnimation.update(),this._volumeTwoAnimation.update(),this._volumeThreeAnimation.update(),void this._volumeFourAnimation.update()}if(e<.5){if("small"===this._volumeOneAnimation.status)return;return this._stopVolumeAnimation(),this._volumeOneAnimation.reverse().setFin("M0,3L0,3C0,3 0,3 1,2C1,2 1,2 2,1L2,1C2,1 2,1 1,2C1,2 1,2 0,3").setStatus("small").reset().setRng(),this._volumeTwoAnimation.reverse().setFin("M0,7C0,6.6 0.5,6 1,6 L1,6 L2,6 L2,6L3,6L9,1L9,17L3,12L0,12").setStatus("small").reset().setRng(),this._volumeThreeAnimation.reverse().setFin("m11,5c2.13542,0.76172 2.98308,2.21418 3,4c0.01692,1.78582 -1.00652,3.51372 -3,4z").setStatus("small").reset().setRng(),this._volumeFourAnimation.reverse().setFin("M11,2C14,3.5 16,6 16,9C16,12 14,15 11,16L11,16C14,15 16,12 16,9C16,6 14,3.5 11,2").setStatus("small").reset().setRng(),this._volumeOneAnimation.update(),this._volumeTwoAnimation.update(),this._volumeThreeAnimation.update(),void this._volumeFourAnimation.update()}"big"!==this._volumeOneAnimation.status&&(this._stopVolumeAnimation(),this._volumeOneAnimation.reverse().setFin("M0,3L0,3C0,3 0,3 1,2C1,2 1,2 2,1L2,1C2,1 2,1 1,2C1,2 1,2 0,3").setStatus("big").reset().setRng(),this._volumeTwoAnimation.reverse().setFin("M0,7C0,6.6 0.5,6 1,6 L1,6 L2,6 L2,6L3,6L9,1L9,17L3,12L0,12").setStatus("big").reset().setRng(),this._volumeThreeAnimation.reverse().setFin("m11,5c2.13542,0.76172 2.98308,2.21418 3,4c0.01692,1.78582 -1.00652,3.51372 -3,4z").setStatus("big").reset().setRng(),this._volumeFourAnimation.reverse().setFin("m11,0c4.69355,1.34516 7,4.5 7,9c0,4.5 -2.46774,7.89677 -7,9l0,-2c3,-1 5,-3.35484 5,-7c0,-3.64516 -1.67741,-5.77419 -5,-7").setStatus("big").reset().setRng(),this._volumeOneAnimation.update(),this._volumeTwoAnimation.update(),this._volumeThreeAnimation.update(),this._volumeFourAnimation.update())}},{key:"_updateVolumeProgress",value:function(){var e=100*this.player.getVolume();this.template.volumeProgressNow.style.width="".concat(e,"%")}},{key:"_adjustVolume",value:function(e){var t=this.template.volumeProgress.offsetWidth,n=Math.min(Math.max(0,this._adjustVolumeStartWidth+e),t);this._setVolume(n/t)}},{key:"_setVolume",value:function(e){this.player.setVolume(e)}},{key:"isActive",value:function(){return!!this._isMouseEnter||(!!this._volumnDrag.isDragging()||!(!this._progressDrag||!this._progressDrag.isDragging()))}}]),t}(j),pe=function(e){function t(e){var n;return s()(this,t),(n=c()(this,p()(t).call(this))).player=e,n.template=n.player.template,n.opt=n.player.opt,n._init(),n}return v()(t,e),l()(t,[{key:"_init",value:function(){var e=this;this.player.hasQuality()&&(this._activeIndex=-1,ne(this.template.quality,"mouseenter",this._showList),ne(this.template.quality,"mouseleave",this._hideList),ne(this.template.qualityActive,"click",this._toggleList),ne(this.template.qualityList,"click",(function(t){var n=t.target;"li"===n.tagName.toLowerCase()&&(n.classList.contains("one-player--quality-list-active")||e.change(parseInt(n.getAttribute("data-index"),10)))})),!this.opt.live&&this.opt.keepTimeOnQualityChange&&ne(this.player.video,"loadedmetadata",this._setTimeOnChange))}},{key:"_updateListColor",value:function(e){Array.prototype.forEach.call(this.template.qualityList.querySelectorAll("li"),(function(t,n){n===e?t.classList.add("one-player--quality-list-active"):t.classList.remove("one-player--quality-list-active")}))}},{key:"_isNoActiveIndex",value:function(){return-1===this._activeIndex}},{key:"change",value:function(e){if(this.player.hasQuality()){var t=this.opt.quality;if((e=Math.min(e,t.length-1))!==this._activeIndex&&(!this.opt.beforeQualityChange||this._isNoActiveIndex()||this.opt.beforeQualityChange(e))){this._currentTime=Math.floor(this.player.video.currentTime),this._updateListColor(e);var n=t[e];this.template.qualityActive.textContent=n.name,this.player.loadUrl(n.url),this._isNoActiveIndex()||this.player.emit(N.QUALITY_CHANGE,{index:e}),this._activeIndex=e}}}},{key:"_setTimeOnChange",value:function(){this._currentTime&&this.player.setTime(this._currentTime)}},{key:"_showList",value:function(){this.template.quality.classList.add("one-player--quality-show")}},{key:"_hideList",value:function(){this.template.quality.classList.remove("one-player--quality-show")}},{key:"_toggleList",value:function(){this.template.quality.classList.toggle("one-player--quality-show")}},{key:"reduce",value:function(){this.change(this._activeIndex+1)}},{key:"isLast",value:function(){return!!this.player.hasQuality()&&this._activeIndex===this.opt.quality.length-1}}]),t}(j),de=function(e){function t(e){var n;return s()(this,t),(n=c()(this,p()(t).call(this))).player=e,n.template=n.player.template,n._initListener(),n}return v()(t,e),l()(t,[{key:"_initListener",value:function(){this._initPlay(),this._initLoading(),this._initTimeout(),this._initErrorTip()}},{key:"_initPlay",value:function(){var e=this;this.player.opt.togglePlayOnClickVideo&&(this.player.on(N.CLICK_VIDEO,(function(){e.template.bezelPlayStatus.innerHTML=e.player.isPaused()?D.pause:D.play,e.template.bezel.classList.add("one-player--bezel-show-play")})),ne(this.template.bezelPlayStatus,"animationend",(function(){e.template.bezel.classList.remove("one-player--bezel-show-play")}))),this.player.opt.canFull&&ne(this.template.bezel,"dblclick",(function(t){e.player.toggleFullScreen()}))}},{key:"_initLoading",value:function(){var e=this;this.player.on(U,(function(t){e.player.log("showLoading",t.type),e.showLoading()})),this.player.on(z,(function(t){e.player.log("hideLoading",t.type),e.hideLoading()}))}},{key:"_initTimeout",value:function(){var e=this;this.player.on(N.TIMEOUT,(function(t){e.player.log("showTimeout",t.type),e._showTimeout()})),this.player.on(N.STOP_TIMEOUT,(function(t){e.player.log("hideTimeout",t.type),e._hideTimeout()}))}},{key:"_initErrorTip",value:function(){var e=this;this.player.on(N.ERROR_TIP,(function(t){e.player.log("showErrorTip",t.type);var n=t.detail,i=W()(n);Array.isArray(n)?e.showMessage.apply(e,o()(n)):"string"===i?e.showMessage(n):"object"===i&&e.showMessage(n.message,n)})),ne(this.template.messageHandleButton,"click",(function(t){e.__messageHandle&&e.__messageHandle(t)}))}},{key:"_showTimeout",value:function(){var e,t;!this.player.hasQuality()||this.player.isLastQuality()?e=this.player.opt.text.slowNetworkTip2:(e=this.player.opt.text.slowNetworkTip,t={action:this.player.opt.text.slowNetworkButtonTip,handle:this._switchQuality}),this.showLoading(!0),this.showMessage(e,t)}},{key:"_hideTimeout",value:function(){this.hideLoading(),this.clearMessage()}},{key:"_switchQuality",value:function(){var e=this.player.opt.quality;e&&e.length&&(this.player.reduceQuality(),this._hideTimeout())}},{key:"clearMessage",value:function(){this.template.bezel.classList.remove("one-player--bezel-show-message")}},{key:"showMessage",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.player.log("showMessage",t),this.updateMessageTip.apply(this,t),this.template.bezel.classList.add("one-player--bezel-show-message")}},{key:"updateMessageTip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.template.messageTip.textContent=e,this.template.messageHandleButton.textContent=t.action||"",this.__messageHandle=t.handle}},{key:"hideLoading",value:function(){this.template.bezel.classList.remove("one-player--bezel-show-loading"),this.showLoadingTimer&&clearTimeout(this.showLoadingTimer)}},{key:"showLoading",value:function(e){var t=this;this.template.bezel.classList.contains("one-player--bezel-show-loading")||(this.showLoadingTimer&&clearTimeout(this.showLoadingTimer),!e&&this.player.opt.showLoadingDelay?this.showLoadingTimer=setTimeout((function(){t.template.bezel.classList.add("one-player--bezel-show-loading")}),1e3*this.player.opt.showLoadingDelay):this.template.bezel.classList.add("one-player--bezel-show-loading"))}},{key:"clear",value:function(){this.template.bezel.className="one-player--bezel"}}]),t}(j),ve=function(e){function t(e){var n;return s()(this,t),(n=c()(this,p()(t).call(this))).player=e,n.template=n.player.template,n._init(),n}return v()(t,e),l()(t,[{key:"_init",value:function(){var e=this;this.player.on("playing",(function(){e.template.cover.style.display="none"}))}}]),t}(j),me=function(e){function t(e){var n;return s()(this,t),(n=c()(this,p()(t).call(this))).player=e,n.template=n.player.template,n._init(),n}return v()(t,e),l()(t,[{key:"_init",value:function(){var e=this;this.player.isPaused()&&this._show(),this.player.on(N.USER_ACTIVE_CHANGE,(function(t){t.detail.active?e._show():e._hide()}))}},{key:"_show",value:function(){this.template.live.classList.add("one-player--live-show")}},{key:"_hide",value:function(){this.template.live.classList.remove("one-player--live-show")}}]),t}(j),ye=function(e){function t(e){var n;return s()(this,t),(n=c()(this,p()(t).call(this))).player=e,n.template=n.player.template,n._opt=n.player.opt.danMu,n._visible=n._opt.visible,n._priorityQueue=[],n._queue=[],n._activeQueue=[],n._timeOutIds=[],n._init(),n}return v()(t,e),l()(t,[{key:"_init",value:function(){var e=this;this.player.on(N.VIDEO_SIZE_CHANGE,(function(){e._updateActive()})),this.player.on(N.READY,(function(){e._triggerVisibleChangeEvent()})),this.player.on(N.FULLSCREEN_CHANGE,(function(){e._clearActive()}))}},{key:"_add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._selectEnoughRowIndex();null!==n?this._start(e,n):t?this._addPriorityQueue(e):this._addQueue(e)}},{key:"_addPriorityQueue",value:function(e){this._priorityQueue.push(e)}},{key:"_readFromPriorityQueue",value:function(){return this._priorityQueue.shift()}},{key:"_addQueue",value:function(e){this._queue.push(e),this._opt.limit&&this._queue.length>this._opt.limit&&this._queue.shift()}},{key:"_readFromQueue",value:function(){return this._queue.shift()}},{key:"_selectEnoughRowIndex",value:function(){for(var e=null,t=0;t<this._opt.maxRows;t++)if(!this._activeQueue[t]){e=t;break}return e}},{key:"append",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._visible&&(Array.isArray(t)||(t=[t]),t.forEach((function(t){return e._add(t,n)})))}},{key:"_onArriveMinSpace",value:function(e){if(this._visible){e.setAttribute("data-arrive-min",1);var t=parseInt(e.getAttribute("data-index"),10);this._activeQueue[t]=!1,this._moveNext(t)}}},{key:"_moveNext",value:function(e){var t=this._readFromPriorityQueue()||this._readFromQueue();t&&this._start(t,e)}},{key:"_onArriveEnd",value:function(e){e.parentElement.removeChild(e)}},{key:"_start",value:function(e,t){this._activeQueue[t]=!0;var n=document.createElement("div");n.setAttribute("data-index",t),this._opt.rowHeight&&(n.style.height="".concat(this._opt.rowHeight,"px")),this._opt.richText?n.innerHTML=function(e,t){e=e.replace(/\n/g,"");var n=Object.keys(t);function i(e){return"temp"===e.tagName.toLowerCase()||-1!==n.indexOf(e.tagName.toLowerCase())}var o=document.createElement("temp");return o.innerHTML=e,function e(t){if(1===t.nodeType)if(t.childNodes.length||i(t))if(i(t))Array.from(t.childNodes).forEach((function(t){e(t)}));else{var n=document.createElement("temp");Array.from(t.childNodes).forEach((function(e){n.appendChild(e)})),t.parentNode.replaceChild(n,t),e(n)}else t.parentNode.removeChild(t)}(o),function(e){e.innerHTML=e.innerHTML.replace(/<\/?temp>/gi,"")}(o),function e(n){if(n.tagName){var i=t[n.tagName.toLowerCase()],o=n.attributes;Array.from(o).forEach((function(e){-1===i.indexOf(e.nodeName)&&n.removeAttribute(e.nodeName)}))}n.children.length&&Array.from(n.children).forEach((function(t){e(t)}))}(o),o.innerHTML}(e,this._opt.allowTag):n.textContent=e,this.template.danMu.appendChild(n),n.style.top="".concat(t*ae(n),"px"),this._move(n)}},{key:"_clearTimeOut",value:function(e){var t=J(this._timeOutIds,(function(t){return e===t}));-1!==t&&(clearTimeout(e),this._timeOutIds.splice(t,1))}},{key:"_clearAllTimeOut",value:function(){this._timeOutIds.forEach((function(e){return clearTimeout(e)})),this._timeOutIds=[]}},{key:"_move",value:function(e){var t=this,n=se(this.template.danMu)+se(e),i=this._opt.initSpace+se(e),o=ee(e),r=se(this.template.danMu)-o.left,s=Math.max(0,n-r),a=Math.max(0,i-r),l=this._computedSpeed(e),u=s/l,c=a/l,h="".concat(u,"s"),p="translateX(-".concat(n,"px)");e.setAttribute("data-speed",l),e.style.transitionDuration=h,e.style.transform=p,c&&(this._clearItemMinSpaceListener(e),e.__minSpaceListener=setTimeout((function(n){return t._onArriveMinSpace(e)}),1e3*c),this._timeOutIds.push(e.__minSpaceListener)),u&&(this._clearItemEndedListener(e),e.__endedListener=setTimeout((function(n){return t._onArriveEnd(e)}),1e3*u),this._timeOutIds.push(e.__endedListener))}},{key:"_clearItemMinSpaceListener",value:function(e){e.__minSpaceListener&&this._clearTimeOut(e.__minSpaceListener)}},{key:"_clearItemEndedListener",value:function(e){e.__endedListener&&this._clearTimeOut(e.__endedListener)}},{key:"_getPreItem",value:function(e){var t=parseInt(e.getAttribute("data-index"),10),n=this.template.danMu.querySelectorAll('[data-index="'.concat(t,'"]'));if(!n)return null;var i=n[J(Array.prototype.slice.call(n),(function(t){return e===t}))-1];return i||null}},{key:"_computedSpeed",value:function(e){if(!this._opt.acceleration)return this._opt.speed;var t=this._computedAccelerationSpeed(e);if(!this._opt.noCover)return t;var n=this._getPreItem(e);if(!n)return t;var i=ee(n),o=parseFloat(n.getAttribute("data-speed")),r=se(this.template.danMu)-i.right,s=ee(e).left/(r/o);return Math.min(t,s)}},{key:"_computedAccelerationSpeed",value:function(e){var t=se(e)-this._opt.minWidth;return this._opt.speed+Math.round(this._opt.acceleration*t)}},{key:"_updateActive",value:function(){var e=this,t=this.template.danMu.children;Array.from(t).forEach((function(t){e._move(t)}))}},{key:"_clearActive",value:function(){var e=this,t=this.template.danMu.children;Array.from(t).forEach((function(t){e._clearItemMinSpaceListener(t),e._clearItemEndedListener(t)})),this._activeQueue=[],this.template.danMu.innerHTML=""}},{key:"_clear",value:function(){this._clearAllTimeOut(),this._queue=[],this._priorityQueue=[],this._clearActive()}},{key:"toggle",value:function(){this._visible?this.hide():this.show()}},{key:"isVisible",value:function(){return this._visible}},{key:"show",value:function(){this._visible=!0,this._triggerVisibleChangeEvent()}},{key:"hide",value:function(){this._visible=!1,this._clear(),this._triggerVisibleChangeEvent()}},{key:"_triggerVisibleChangeEvent",value:function(){this.player.emit(N.DAN_MU_VISIBLE_CHANGE,{visible:this._visible})}}]),t}(j),fe=n(8),_e=n.n(fe),ge=function(e){function t(e){var n;return s()(this,t),(n=c()(this,p()(t).call(this))).player=e,n.template=n.player.template,n._init(),n}return v()(t,e),l()(t,[{key:"_init",value:function(){this._initReset(),this._initVersion(),this._initStats(),this._initCopyUrl(),this._initPip(),ne(this.template.playerWhole,"contextmenu",this._onContextMenuListener,!0),ne(this.template.contextMenu,["blur","click"],this._onBlurListener)}},{key:"_initReset",value:function(){var e=this;this.player.opt.contextMenu.resetAble&&(re(this.template.contextMenuReset),ne(this.template.contextMenuReset,"click",(function(){ie(e.template.playerWhole,"contextmenu",e._onContextMenuListener,!0)})))}},{key:"_onBlurListener",value:function(){this._hide()}},{key:"_initVersion",value:function(){this.template.contextMenuVersion.textContent="".concat("one-player"," v").concat("1.0.0")}},{key:"_onContextMenuListener",value:function(e){var t=e.currentTarget.getBoundingClientRect();this._show(e.clientX-t.left,e.clientY-t.top),e.stopPropagation(),e.preventDefault()}},{key:"_show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.template.contextMenu.style.left="".concat(e,"px"),this.template.contextMenu.style.top="".concat(t,"px"),re(this.template.contextMenu),this.template.contextMenu.focus()}},{key:"_hide",value:function(){oe(this.template.contextMenu)}},{key:"_initStats",value:function(){var e=this;ne(this.template.contextMenuStats,"click",(function(){e.player.stats.toggle()}))}},{key:"_initCopyUrl",value:function(){var e=this;ne(this.template.contextMenuCopyUrl,"click",(function(){!function(e){var t=document.createElement("input");t.style="position:absolute;z-index:-100;opacity:0;",t.value=e,window.document.body.appendChild(t),t.select();try{document.execCommand("copy")}catch(e){}window.document.body.removeChild(t)}(e.player.opt.contextMenu.copyUrl||e.player.getCurrentUrl())}))}},{key:"_initPip",value:function(){this.player.opt.contextMenu.pipAble&&this.player.video.requestPictureInPicture&&(re(this.template.contextMenuPip),ne(this.template.contextMenuPip,"click",this._pipVideo))}},{key:"_pipVideo",value:function(){return _e.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.player.video===document.pictureInPictureElement){e.next=6;break}return e.next=4,_e.a.awrap(this.player.video.requestPictureInPicture());case 4:e.next=8;break;case 6:return e.next=8,_e.a.awrap(document.exitPictureInPicture());case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),this.player.log("> Argh! ".concat(e.t0));case 13:case"end":return e.stop()}}),null,this,[[0,10]])}}]),t}(j),we=function(e){function t(e){var n;return s()(this,t),(n=c()(this,p()(t).call(this))).player=e,n.template=n.player.template,n.speed=[],n.maxSpeedPoint=200,n._init(),n}return v()(t,e),l()(t,[{key:"_init",value:function(){ne(this.template.statsClose,"click",this._hide),this.player._Hls&&(this._initViewport(),this._initResolution(),this._initFormat(),this._initSpeed(),this._initNetwork(),this._initDroppedFrames())}},{key:"_hide",value:function(){oe(this.template.stats)}},{key:"toggle",value:function(){this.template.stats.classList.toggle("one-player-hide")}},{key:"_initResolution",value:function(){var e=this;this.player.on("loadedmetadata",(function(t){e.template.statsResolution.textContent="".concat(t.target.videoWidth," x ").concat(t.target.videoHeight)}))}},{key:"_initDroppedFrames",value:function(){var e=this;this.player.on("timeupdate",(function(){var t="",n="";if(e.player.video.getVideoPlaybackQuality){var i=e.player.video.getVideoPlaybackQuality();t=i.droppedVideoFrames,n=i.totalVideoFrames}else e.player.video.webkitDecodedFrameCount&&(t=e.player.video.webkitDroppedFrameCount,n=e.player.video.webkitDecodedFrameCount);e.template.statsDroppedFrames.textContent="".concat(t," / ").concat(n)}))}},{key:"_initViewport",value:function(){var e=this;this.player.on(N.VIDEO_SIZE_CHANGE,(function(t){e.template.statsViewport.textContent="".concat(t.detail.width," x ").concat(t.detail.height)}))}},{key:"_initFormat",value:function(){var e=this;this.player.on(N.SOURCE_CHANGE,(function(t){e.template.statsFormat.textContent=t.detail.source?t.detail.source.replace(/.*\.(.+)$/,"$1").toUpperCase():""}))}},{key:"_updateSpeed",value:function(e){this._addSpeed(e),this.template.statsSpeed.textContent="".concat(e," KBps"),this._updateSpeedChart(),this._startSpeedTimer()}},{key:"_clearSpeedTimer",value:function(){this.speedTimer&&clearTimeout(this.speedTimer)}},{key:"_startSpeedTimer",value:function(){var e=this;this._clearSpeedTimer(),this.speedTimer=setTimeout((function(){e._addSpeed(0),e.template.statsSpeed.textContent="0 KBps",e._updateSpeedChart()}),1e4)}},{key:"_addSpeed",value:function(e){this.speed.push(e),this.speed.length>this.maxSpeedPoint&&this.speed.shift()}},{key:"_clearNetworkTimer",value:function(){this.networkTimer&&clearTimeout(this.networkTimer)}},{key:"_startNetworkTimer",value:function(){var e=this;this._clearNetworkTimer(),this.networkTimer=setTimeout((function(){e.template.statsNetwork.textContent="0 KB"}),1e4)}},{key:"_updateSpeedChart",value:function(){var e=this.speed.map((function(e,t){var n=10;return n=e>=1e3?0:Math.round(10-10*e/1e3),"".concat(t," ").concat(n)}));this.template.statsSpeedChart.querySelector("polyline").setAttribute("points",e.join())}},{key:"_updateNetwork",value:function(e){this.template.statsNetwork.textContent="".concat(e," KB"),this._startNetworkTimer()}},{key:"_preFillSpeed",value:function(){this.speed.fill&&(this.speed=Array(this.maxSpeedPoint).fill(0),this._updateSpeedChart())}},{key:"_initSpeed",value:function(){var e=this;this.player._Hls&&(this.template.statsSpeedChart.querySelector("svg").setAttribute("viewBox","0 0 ".concat(this.maxSpeedPoint," 10")),this._preFillSpeed(),this.player.on(this.player._Hls.Events.FRAG_LOADED,(function(t,n){var i=Math.round(n.stats.loaded/1024),o=Math.round((n.stats.tload-n.stats.trequest)/1e3)||1,r=Math.round(i/o);e._updateSpeed(r)})))}},{key:"_initNetwork",value:function(){var e=this;if(this.player._Hls){var t=0;this.player.on(this.player._Hls.Events.FRAG_LOADING,(function(n,i){t=0,e._updateNetwork(0)})),this.player.on(this.player._Hls.Events.FRAG_LOAD_PROGRESS,(function(n,i){var o=Math.round((i.stats.loaded-t)/1024);t=i.stats.loaded,e._updateNetwork(o)}))}}}]),t}(j),ke=[],Le=function e(t){s()(this,e),this.player=t};function be(e,t){if(!(e.prototype instanceof Le))throw new Error("".concat(e.name," must extend from Plugin"));-1===J(ke,(function(t){return t[0]===e}))&&ke.push([e,t])}var xe={debug:!1,container:null,autoPlay:!1,autoReload:8,preload:"auto",muted:!1,playsInline:!0,canFull:!0,live:!0,reloadOnReplayInLiveMode:!1,togglePlayOnClickVideo:!0,hls:null,quality:null,beforeQualityChange:null,keepTimeOnQualityChange:!1,cover:null,coverType:"contain",showLoadingDelay:0,timeout:3,userActionChangeTime:3,showCountdown:!1,initVolume:1,toastDuration:2,text:{liveTag:"LIVE",fullButtonTip:"Enter Fullscreen",cancelFullButtonTip:"Exit Fullscreen",playButtonTip:"Play",pauseButtonTip:"Pause",freshButtonTip:"Refresh",slowNetworkTip:"The current network quality is poor. To continue watching without interruptions, you can switch to a lower video resolution.",slowNetworkTip2:"Loading failed. Please try again later.",slowNetworkButtonTip:"Switch",mutedTip:"Turn up the volume and enjoy the Stream!",enableDanMuButtonTip:"Show",disableDanMuButtonTip:"Hide",commentButton:"Send",commentPlaceholder:'Hit "Enter" to comment',contextMenu:{copyUrl:"Copy video URL",stats:"Stats for nerds",pip:"Picture in picture",reset:"Reset the context menu"}},contextMenu:{copyUrl:"",pipAble:!0,resetAble:!1},danMu:{enable:!1,visible:!0,limit:null,maxRows:3,rowHeight:null,topSpace:0,initSpace:120,speed:80,acceleration:0,minWidth:11,noCover:!1,richText:!1,allowTag:{div:["class","style"]}},comment:{enable:!1,maxLength:null}},Ce=function(e){function t(e){var n;return s()(this,t),(n=c()(this,p()(t).call(this)))._initOpt(e),n._initHls(),n._initComponents(),n._initListener(),n._initData(),n._initPlugins(),n.emit(N.READY),n}return v()(t,e),l()(t,[{key:"_initPlugins",value:function(){var e;e=this,ke.map((function(t){new t[0](e,t[1])}))}},{key:"_initComponents",value:function(){this.template=new B(this),this.video=this.template.video,this.toolTip=new G(this),this.controlBar=new he(this),this.bezel=new de(this),this.quality=new pe(this),this.contextMenu=new ge(this),this.stats=new we(this),this.opt.cover&&(this.cover=new ve(this)),this.opt.live&&(this.live=new me(this)),this.opt.danMu.enable&&(this.danMu=new ye(this))}},{key:"_initData",value:function(){this.setVolume(this.opt.initVolume,!0)}},{key:"_initOpt",value:function(e){var t=this;this.opt=Object.assign({},xe,e),Object.keys(xe).forEach((function(e){var n;null!==(n=xe[e])&&"object"===W()(n)&&(t.opt[e]=Object.assign({},xe[e],t.opt[e]))}))}},{key:"_initHls",value:function(){this.opt.hls&&this.opt.hls.class&&(this._Hls=this.opt.hls.class,this._hls=new this._Hls(this.opt.hls))}},{key:"_initListener",value:function(){this._initVideoClickListener(),this._initFullscreenChangeListener(),this._initVolumeChangeListener(),this._initTimeoutListener(),this._initUserActionChangeListener(),this._initVideoSizeChangeListener(),this._initAutoPlayListener(),this._initErrorListener()}},{key:"_startAutoReloadListener",value:function(){var e=this;this._clearAutoReloadListener(),this._autoReload=0,this._autoReloadListener=setInterval((function(){e._autoReload=e._autoReload+1,e._autoReload>=e.opt.autoReload&&e._triggerAutoRecoverTimeout()}),1e3)}},{key:"_triggerAutoRecoverTimeout",value:function(){this._clearAutoReloadListener(),this.reload(!0)}},{key:"_clearAutoReloadListener",value:function(){this._autoReloadListener&&clearInterval(this._autoReloadListener),this._autoReloadListener=null}},{key:"_stopAutoReloadListener",value:function(){this._clearAutoReloadListener()}},{key:"_initErrorListener",value:function(){var e=this;this.on("error",(function(t){var n=t.target.error;e.emit(N.ERROR,{message:"[".concat(n.code,"][").concat(n.message,"]")})})),this._Hls&&this.on(this._Hls.Events.ERROR,(function(t,n){if(e.emit(N.ERROR,{message:"[".concat(t,"][").concat(n.type,"][").concat(n.fatal,"][").concat(n.details,"]")}),n.fatal)switch(n.type){case e._Hls.ErrorTypes.NETWORK_ERROR:e.opt.autoReload&&e._hls.startLoad();break;case e._Hls.ErrorTypes.MEDIA_ERROR:e._handleMediaError();break;default:e._destroyHls()}}))}},{key:"_handleMediaError",value:function(){this._hls&&this._hls.recoverMediaError()}},{key:"_initVideoSizeChangeListener",value:function(){var e=this;new le((function(t){e.emit(N.VIDEO_SIZE_CHANGE,{width:se(e.video),height:ae(e.video)})})).observe(this.video)}},{key:"_initUserActionChangeListener",value:function(){var e=this,t=!1;this._needAutoReload()&&(this.on(N.BEFORE_AUTO_RELOAD,(function(){t=!0})),this.on("loadstart",(function(){t=!1}))),this.on(["pause","ended"],(function(){e._triggerUserActiveChange(!0)})),this.on("emptied",(function(){t||e._triggerUserActiveChange(!0)})),this.on("play",(function(){e._onPlay()})),ne(this.template.playerWhole,"mousemove",this._onMouseMoveListener),ne(this.template.playerWhole,"mouseleave",this._onMouseLeaveListener),this.on(N.DRAG_END,this._onMouseLeaveListener)}},{key:"_triggerUserActiveChange",value:function(e){this._stopUserActionChangeListener(),e!==this._isUserActive&&(this._isUserActive=e,this.emit(N.USER_ACTIVE_CHANGE,{active:this._isUserActive}),this.opt.canFull&&(X()&&!e?this.template.playerWhole.classList.add("one-player-no-cursor"):this.template.playerWhole.classList.remove("one-player-no-cursor")))}},{key:"_startUserActionChangeListener",value:function(){var e=this;this._stopUserActionChangeListener(),this._userActionTime=0,this._userActionChangeListener=setInterval((function(){e._userActionTime=e._userActionTime+1,e._userActionTime>=e.opt.userActionChangeTime&&e._triggerUserActiveChange(!1)}),1e3)}},{key:"_onPlay",value:function(){this.controlBar.isActive()||this._startUserActionChangeListener()}},{key:"_onMouseMoveListener",value:function(){this.isPaused()||(this._triggerUserActiveChange(!0),this.controlBar.isActive()||this._startUserActionChangeListener())}},{key:"_onMouseLeaveListener",value:function(){X()||this.isPaused()||this.controlBar.isActive()||this._triggerUserActiveChange(!1)}},{key:"_stopUserActionChangeListener",value:function(){this._userActionChangeListener&&clearInterval(this._userActionChangeListener),this._userActionChangeListener=null}},{key:"_needAutoReload",value:function(){return this.opt.autoReload&&this.live}},{key:"_triggerTimeout",value:function(){this.emit(N.TIMEOUT),this._clearTimeoutListener(),this._needAutoReload()&&this._startAutoReloadListener()}},{key:"_startTimeoutListener",value:function(){var e=this;this._clearTimeoutListener(),this._timeout=0,this._timeoutListener=setInterval((function(){e._timeout=e._timeout+1,e._isTimeout()&&e._triggerTimeout()}),1e3)}},{key:"_isTimeout",value:function(){return this._timeout>=this.opt.timeout}},{key:"_clearTimeoutListener",value:function(){this._timeoutListener&&clearInterval(this._timeoutListener),this._timeoutListener=null}},{key:"_stopTimeoutListener",value:function(e){this.emit(N.STOP_TIMEOUT),this._clearTimeoutListener(),this._needAutoReload()&&this._stopAutoReloadListener()}},{key:"_initTimeoutListener",value:function(){this.on(U,this._startTimeoutListener),this.on(z,this._stopTimeoutListener)}},{key:"_initVideoClickListener",value:function(){var e=this;ne(this.template.videoMask,"click",(function(t){e.emit(N.CLICK_VIDEO),e.opt.togglePlayOnClickVideo&&e.toggle()}))}},{key:"_initAutoPlayListener",value:function(){var e=this;this.opt.autoPlay&&!this.opt.muted&&this.on("loadeddata",(function(){e.isPaused()&&(e.mute(!0),e.play(),e.emit(N.BROWSER_AUTO_PLAY_BLOCKED),e._startDocMutedListener())}))}},{key:"_startDocMutedListener",value:function(){ne(document,"click",this._docMutedListener)}},{key:"_docMutedListener",value:function(){this.video.muted?this.mute(!1):this._stopDocMutedListener()}},{key:"_stopDocMutedListener",value:function(){document.removeEventListener("click",this._docMutedListener)}},{key:"_initVolumeChangeListener",value:function(){var e=this;this.on("volumechange",(function(){e.emit(N.VOLUME_CHANGE,{volume:e.video.volume})}))}},{key:"_initFullscreenChangeListener",value:function(){this.opt.canFull&&ne(this.template.videoMask,"dblclick",this.toggleFullScreen),ne(document,I,this._onFullscreenChangeListener)}},{key:"_onFullscreenChangeListener",value:function(){this.emit(N.FULLSCREEN_CHANGE,{fullScreen:X()})}},{key:"_stopFullscreenListener",value:function(){var e=this;I.forEach((function(t){document.removeEventListener(t,e._onFullscreenChangeListener)}))}},{key:"_onOne",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t||!t.length)return this;var i=t[0];if(!i)return this;if(0===i.indexOf("hls")&&this._hls){var o;if(this.opt.debug&&i!==N.EVENT){var r=this,s=t[1];t[1]=function(){r.emit(N.EVENT,{type:i}),s.apply(void 0,arguments)}}return(o=this._hls).on.apply(o,t),this}return ne.apply(void 0,[this.video].concat(t)),this}},{key:"on",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(!n||!n.length)return this;var r=n[0];return Array.isArray(r)?(r.forEach((function(t){var i=n.slice(1);i.unshift(t),e._onOne.apply(e,o()(i))})),this):this._onOne.apply(this,n)}},{key:"dispatchEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new window.CustomEvent(e,{detail:t});this.video.dispatchEvent(n)}},{key:"emit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.dispatchEvent(e,t),this.opt.debug&&e!==N.EVENT&&this.dispatchEvent(N.EVENT,{type:e})}},{key:"load",value:function(e){if(isNaN(e)){if(Array.isArray(this.opt.quality)&&this.opt.quality.length){var t=J(this.opt.quality,(function(t){return t.url===e}));if(-1!==t)return void this._loadQuality(t)}this.loadUrl(e)}else this._loadQuality(e)}},{key:"loadUrl",value:function(e){e!==this._url&&this.emit(N.SOURCE_CHANGE,{source:e}),this._url=e,this._loadMedia(e),this.emit(N.LOAD)}},{key:"getCurrentUrl",value:function(){return this._url}},{key:"_loadQuality",value:function(e){if(this.opt.quality){var t=this.opt.quality[e];t&&t.url&&this.quality.change(e)}}},{key:"switch",value:function(e){Z(e)?this._initHls():this._destroyHls(),this.loadUrl(e)}},{key:"_loadMedia",value:function(e){Z(e)?this._loadHlsMedia(e):this._loadOtherMedia(e)}},{key:"_loadOtherMedia",value:function(e){this.video.setAttribute("src",e)}},{key:"_loadHlsMedia",value:function(e){this._hls&&this._Hls.isSupported()?(this._hls.loadSource(e),this._hls.attachMedia(this.video)):this._loadOtherMedia(e)}},{key:"toggle",value:function(){this.isPaused()?this.opt.live&&this.opt.reloadOnReplayInLiveMode?this.reload():this.play():this.pause()}},{key:"play",value:function(){var e=this.video.play();e&&e.catch((function(e){}))}},{key:"pause",value:function(){this.video.pause()}},{key:"setTime",value:function(e){this.video.currentTime=e}},{key:"isPaused",value:function(){return!!this.video.paused}},{key:"setFullScreenElement",value:function(e){this._fullScreenElement=e}},{key:"resetFullScreenElement",value:function(){this._fullScreenElement=null}},{key:"fullScreen",value:function(){var e=this._fullScreenElement||this.template.playerWhole,t=e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen;return t?(t.call(e),this):(this.video.webkitEnterFullScreen&&this.video.webkitEnterFullScreen(),this)}},{key:"cancelFullScreen",value:function(){var e=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;e&&e.call(document)}},{key:"toggleFullScreen",value:function(){X()?this.cancelFullScreen():this.fullScreen()}},{key:"getVolume",value:function(){return this.video.volume}},{key:"setVolume",value:function(e,t){isNaN(e)||(this.video.volume=e,t||this.mute(0===e))}},{key:"isMuted",value:function(){return this.video.muted}},{key:"toggleMute",value:function(){this.mute(!this.video.muted)}},{key:"mute",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.video.muted=e}},{key:"reload",value:function(e){e&&this.emit(N.BEFORE_AUTO_RELOAD),this.loadUrl(this._url),this.play(),e?this.emit(N.AUTO_RELOAD):this.emit(N.RELOAD)}},{key:"destroy",value:function(){this.emit(N.BEFORE_DESTROY),this._destroyHls(),this._stopTimeoutListener(),this._stopFullscreenListener(),this._stopDocMutedListener(),this._clearContainer(),this.emit(N.DESTROY)}},{key:"_clearContainer",value:function(){this.opt.container.innerHTML=""}},{key:"_destroyHls",value:function(){this._hls&&this._hls.destroy()}},{key:"reduceQuality",value:function(){this.quality.reduce()}},{key:"hasQuality",value:function(){var e=this.opt.quality;return!(!e||!e.length)}},{key:"isLastQuality",value:function(){return this.quality.isLast()}},{key:"appendDanMu",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.danMu?(this.danMu.append(e,t),this):this}},{key:"toggleDanMu",value:function(){return this.danMu?(this.danMu.toggle(),this):this}},{key:"showDanMu",value:function(){return this.danMu?(this.danMu.show(),this):this}},{key:"hideDanMu",value:function(){return this.danMu?(this.danMu.hide(),this):this}},{key:"configDanMu",value:function(e){return this.danMu?(Object.assign(this.opt.danMu,e),this):this}},{key:"isDanMuVisible",value:function(){return!!this.danMu&&this.danMu.isVisible()}},{key:"log",value:function(){if(this.opt.debug){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i="[one-player]".concat(t.join(" "));window.console.log(i),this.emit(N.LOG,{info:i})}}},{key:"showComment",value:function(){this.controlBar.toggleComment(!0)}},{key:"hideComment",value:function(){this.controlBar.toggleComment(!1)}},{key:"clearComment",value:function(){this.controlBar.clearComment()}},{key:"setComment",value:function(e){this.controlBar.setComment(e)}},{key:"showMessage",value:function(){var e;(e=this.bezel).showMessage.apply(e,arguments)}},{key:"clearMessage",value:function(){this.bezel.clearMessage()}},{key:"toast",value:function(e){var t=this,n=document.createElement("div");n.classList.add("one-player-toast"),n.textContent=e,n.style.animationDuration="".concat(this.opt.toastDuration,"s"),this.template.playerWhole.appendChild(n),setTimeout((function(){t.template.playerWhole.removeChild(n)}),1e3*this.opt.toastDuration)}}],[{key:"use",value:function(){be.apply(void 0,arguments)}}]),t}(j);Ce.Plugin=Le,Ce.EVENTS=N,Ce.VERSION="".concat("1.0.0");t.default=Ce}])}));